---
title: "What DAGs Prove, or Don't Prove About Causation"
subtitle: ""
description: ""
authors: 
  - name: "Dan Swart, CPA (ret)"
  - name: "Claude Sonnet 4.5"
date: today
date-format: long
# bibliography: manual-refs.bib
format:
  html:
    resources:
      - reference-backlinks.js
    include-after-body:    
      - text: |
          # <script type="text/javascript" src="reference-backlinks.js"></script>
    default: true         
    code-copy: true
    code-link: true        # This adds individual buttons
    code-fold: true        # Hide code by default, show on click
    code-summary: "Show the code"
    code-overflow: wrap
    code-block-bg: "#FAEBD7"
    code-block-border-left: "#31BAE9"
    embed-resources: true
    include-in-header:
      - text: 
          <link href="https://fonts.googleapis.com/css2?family=Lato&display=swap" rel="stylesheet">
          <link href="https://fonts.googleapis.com/css2?family=Fira+Mono&display=swap" rel="stylesheet">
          <link href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" rel="stylesheet">
          <link href="https://fonts.googleapis.com/css2?family=Cabin&display=swap" rel="stylesheet">
          <link href="https://fonts.googleapis.com/css2?family=Roboto+Slab&display=swap" rel="stylesheet">
          <link href="https://fonts.googleapis.com/css2?family=Schoolbell&display=swap" rel="stylesheet">
      - header.html
    css:
      - swart.css
      - tachyons.min.css
      - r-colors.css
    fontsize: 18pt
    lightbox: true
    page-layout: full
    fig-width: 12
    fig-height: 10
    fig-dpi: 300
    html-math-method: katex
    df-print: paged
    toc: true
    toc-float: true
    citeproc: true
    link-citations: true
    linestretch: 1.0
    
    
    
  typst:
    fig-width: 12
    fig-height: 10
    fig-dpi: 300
    margin:
      x: 1in
      y: 1in
    toc: true
    fontsize: 14pt
    mainfont: "Cabin"
    
  revealjs:
    slide-number: true
    transition: fade
    code-overflow: wrap
    center: true
    smaller: true
    scrollable: true
    chalkboard: true
    multiplex: false
    theme: solarized
    reference-location: margin
    logo: img/red-cross-640-435.png
    footer: "Footer text"
    code-block-height: 650px



  # docx:
  #   highlight-style: github
  #   fig_caption: true



editor: source

quarto:
  render:
    cache-refresh: true


# for .qmd filesd
execute:
  echo: false
  message: false
  warning: false
  eval: true
  fig-width: 12
  fig-height: 10


# for .rmd files
knitr:
  opts_chunk:
    echo: false
    error: false
    warning: false
    message: false
    cache: false

---


```{r}
#| label: setup
#| include: false
# R version 4.4.3 (2025-02-28)
# Platform: x86_64-apple-darwin20
# Running under: macOS Sequoia 15.6.1
# Rstudio 2025.9.2.418 (Cucumberleaf Sunflower)
# 

# install.packages(c("mapview", "survey", "srvyr", "arcgislayers"))

# census_api_key("95496766c51541ee6f402c1e1a8658581285b759", install = TRUE, overwrite = TRUE)



# Force dplyr's select to take precedence
select <- dplyr::select
filter <- dplyr::filter

# Options
options(scipen = 999)
options(qic.clshade = T) # NO LONGER NEEDED; CHARTS ALL PREPARED WITH GGPLOT2 ONLY
options(qic.linecol = 'black') # NO LONGER NEEDED; CHARTS ALL PREPARED WITH GGPLOT2 ONLY
options(qic.signalcol = "red") # NO LONGER NEEDED; CHARTS ALL PREPARED WITH GGPLOT2 ONLY
options(qic.targetcol = "purple") # NO LONGER NEEDED; CHARTS ALL PREPARED WITH GGPLOT2 ONLY
options(DT.options = list(dom = 'pBlfrti')) # Add buttons, filtering, and top (t) pagination controls
options(shiny.maxRequestSize = 50 * 1024^2) # Set upload maximum to 50 MB
options(tigris_use_cache = TRUE)


# Set global theme for consistent plots
ggplot2::theme_set(ggplot2::theme_minimal(base_size = 20) + 
                   ggplot2::theme(plot.title = ggplot2::element_text(face = "bold",
                                                                      size = 26),
                                  plot.subtitle = ggplot2::element_text(face = "bold",
                                                                         size = 24),
                                  axis.title.x = ggplot2::element_text(face = "bold",
                                                                        size = 22),
                                  axis.title.y = ggplot2::element_text(face = "bold",
                                                                        size = 22),
                                  axis.text.x = ggplot2::element_text(face = "bold",
                                                                       size = 22,
                                                                       angle = 45,
                                                                       hjust = 1),
                                  legend.position = "bottom",
                                  strip.text = ggplot2::element_text(face = "bold"),
                                  panel.spacing.x = grid::unit(1.5,
                                                                "cm"),
                                  panel.spacing.y = grid::unit(1.5,
                                                                "cm"),
                                  plot.margin = ggplot2::margin(20,
                                                                 20,
                                                                 20,
                                                                 20,
                                                                 "pt")))


# Set seed for reproducibility
set.seed(123)

```



The battery of tests we perform on our DAGs don't actually prove causation - they assume causation based on our causal model and then test whether the data is consistent with that model.
<br>

## What These Tests Really Show

### Consistency with assumptions: 

The tests demonstrate that our data is consistent with the causal structure we've specified. When we control for Z and obtain an estimate close to the true parameter value, this shows our adjustment strategy works if our DAG is correct.

### Identification of causal effects: 

If (and this is a big if) our DAG correctly represents the true causal structure, then these tests help us identify and estimate the magnitude of causal effects.

### Robustness checks: 

The sensitivity analysis shows how our estimates would change if our assumptions about unmeasured confounding are incorrect, providing a measure of reliability.
<br>

## Fundamental Limitations

### Assumption-dependent: 

The validity of any causal claim rests entirely on the correctness of the DAG. Our tests can't verify that the DAG itself is true - that comes from substantive domain knowledge.


### Correlation vs. causation: 

Even perfect statistical control of all specified variables doesn't logically prove causation. What we're doing is estimating the association between variables after removing the influence of other variables we believe are confounders.

### Untestable assumptions: 

Some critical causal assumptions are fundamentally untestable with observational data alone - such as the absence of unmeasured confounders.
<br>

## "Influence" vs. Prediction

The distinction between "influence" and "prediction" is key. What these methods provide is:

1.  A predictive relationship that is robust to conditioning on other variables.  
An estimate of the magnitude of causal effect if our causal assumptions are correct

But this is quite different from definitively proving that X causes Y in the sense of direct physical influence. 

In our coffee example, even if we perfectly control for age (Z), we're still just showing that coffee consumption predicts heart disease in a way that isn't explained by age differences.

<br>

## When Can We Make Stronger Causal Claims?

Stronger causal claims require additional evidence beyond what DAG testing provides:

### Experimental evidence: 

Randomized experiments can provide stronger causal evidence by directly manipulating the exposure variable.


### Mechanism: 

Understanding the biological or physical mechanism through which X affects Y strengthens causal claims.


### Multiple lines of evidence: 

Consistent findings across different study designs, populations, and methodologies strengthen causal inference.


### Natural experiments/quasi-experimental designs: 

Methods like instrumental variables, regression discontinuity, or difference-in-differences can provide stronger causal evidence in certain settings.

<br>

## The Pragmatic View

In practice, DAG-based approaches are valuable because they:

1.  Make our causal assumptions explicit and testable

1.  Provide a formal framework for identifying the correct adjustment sets

1.  Allow us to quantify potential bias from unmeasured confounding

1.  Enable prediction of intervention effects if our causal model is correct

<br>


## Conclusion

These tests should be viewed as one piece of a larger body of evidence rather than definitive proof of causation.  The tests themselves demonstrate consistency with a specified causal structure, not the truth of that structure.


